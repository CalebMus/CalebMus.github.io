<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>About — Caleb Müsfeldt</title>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
  <style>
    :root{
      --blue:#222222;
      --cyan:#003cff;
      --yellow:#b22cff;
    }
    html,body{height:100%;margin:0;padding:0;background:var(--blue);overflow:hidden;position:fixed;width:100%;}

    .screen{position:fixed;inset:0;width:100vw;height:100vh;background:var(--blue);overflow:hidden;filter:blur(1.5px) contrast(1.2) saturate(1.5);}

    .crt{position:absolute;inset:0;pointer-events:none;z-index:5;}
    .crt::before{
      content:"";position:absolute;inset:0;
      background:repeating-linear-gradient(to bottom,
        rgba(0,0,0,0.12) 0px,
        rgba(0,0,0,0.12) 2px,
        rgba(255,255,255,0.06) 3px,
        rgba(255,255,255,0.06) 4px);
      opacity:.55;mix-blend-mode:multiply;animation:rows 9s linear infinite;
    }
    .crt::after{
      content:"";position:absolute;inset:-10%;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="180" height="180" viewBox="0 0 180 180"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="1.1" numOctaves="1"/><feColorMatrix type="saturate" values="0"/><feComponentTransfer><feFuncA type="table" tableValues="0 .05 .12 .08"/></feComponentTransfer></filter><rect width="100%" height="100%" filter="url(%23n)"/></svg>');
      opacity:.45;mix-blend-mode:soft-light;animation:grain 3s steps(5,end) infinite;
      box-shadow: inset 140px 0 180px rgba(0,0,0,.25), inset -140px 0 180px rgba(0,0,0,.25);
    }
    @keyframes grain{from{transform:translate(-2%,-2%);} to{transform:translate(2%,2%);} }
    @keyframes rows{0%{transform:translateY(-1%);}100%{transform:translateY(1%);} }

    .menu{position:absolute;inset:0;display:flex;align-items:center;justify-content:flex-start;padding-left:5%;font-family:"VCR OSD Mono","VT323",monospace;letter-spacing:2px;user-select:none;text-align:left;z-index:10;}

    ul{list-style:none;padding:0;margin:0;font-size:clamp(40px, 7.8vw, 82px);line-height:1.2;text-transform:uppercase;}
    
    .header{
      font-size:clamp(14px, 2.8vw, 24px);
      color:rgb(4, 255, 0);
      text-transform:uppercase;
      line-height:1.4;
      margin-bottom:1rem;
      margin-left: -1ch;
    }
    li{
      color:var(--cyan);
      white-space:pre;
      text-shadow:
        -1px -1px 0 #000,
         1px -1px 0 #000,
        -1px  1px 0 #000,
         1px  1px 0 #000,
         2px  2px 1px rgba(0,0,0,0.7),
         3px  3px 1px rgba(0,0,0,0.5);
    }
    li[aria-current="true"]{
      color:var(--yellow);
      text-shadow:
        -1px -1px 0 #000,
         1px -1px 0 #000,
        -1px  1px 0 #000,
         1px  1px 0 #000,
         0 0 10px rgba(255,200,0,.3),
         2px  2px 1px rgba(0,0,0,0.7),
         3px  3px 1px rgba(0,0,0,0.5);
    }

    .cursor{
      display:inline-block;
      width:1ch;
      margin-right:.4ch;
      color:var(--yellow);
      text-shadow:
        -1px -1px 0 #000,
         1px -1px 0 #000,
        -1px  1px 0 #000,
         1px  1px 0 #000,
         2px  2px 1px rgba(0,0,0,0.7),
         3px  3px 1px rgba(0,0,0,0.5);
    } 
    .cursor::before{content:">";} 

    #menuList:focus, *:focus{outline:none;}

    .touch{position:absolute;left:0;width:100%;z-index:15;}
    .touch.up{top:0;height:34%;}
    .touch.enter{top:34%;height:32%;}
    .touch.down{bottom:0;height:34%;}
    .touch{background:transparent;}
    @media (pointer: coarse){
      .touch::after{content:attr(data-label); position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); font-family:"VT323", monospace; font-size:clamp(14px,3.5vw,22px); color:rgba(255,255,255,.5);} 
      .touch.up::after{content:"UP";}
      .touch.enter::after{content:"ENTER";}
      .touch.down::after{content:"DOWN";}
    }

    .info-box{
      position:absolute;
      bottom:1rem;
      right:1rem;
      background:rgb(0, 0, 0);
      border:4px solid rgb(4, 255, 0);
      padding:0.7rem 1.4rem;
      font-family:"VCR OSD Mono","VT323",monospace;
      color:rgb(255, 255, 255);
      font-size:clamp(18px,2.4vw,28px);
      text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;
      z-index:20;
    }

    .content{
      color:var(--cyan);
      font-size:clamp(14px, 2.8vw, 24px);
      line-height:1.4;
      text-transform:none;
      margin-top:1.5rem;
      max-width:90%;
      white-space: pre-wrap;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    #crtCanvas {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      z-index: 10;
      pointer-events: none;
      display: block;
    }
  </style>
</head>
<body>
  <div class="screen" role="application" aria-label="About page">
    <div class="menu">
      <ul id="menuList" tabindex="0" aria-live="polite"></ul>
    </div>
    <div class="touch up" role="button" aria-label="Up"></div>
    <div class="touch enter" role="button" aria-label="Enter"></div>
    <div class="touch down" role="button" aria-label="Down"></div>
    <div class="info-box">Press H to go home</div>
    <div class="crt" aria-hidden="true"></div>
  </div>
  <canvas id="crtCanvas"></canvas>
  <script>
    const ITEMS = [
      { label: "ABOUT", static: true },
      { 
        label: `I am 23 years old by way of Phoenix, Arizona. Regarding creating, I primarily enjoy my research, writing, and interactive art. Regarding consuming, I primarily enjoy reading, listening to music, and nature.

The following are things I enjoy (subject to change, no particular order):

Phoenix Suns
Duino Elegies by Rainer Maria Rilke
The Legend of Zelda: Twilight Princess
Post-punk, electroclash, neo-psychedelia, and hypnagogic pop
Pure Heroine by Lorde
The temperature range of 45-70 degrees F (~7–21 C)
Arizona, U.S.A.
The sublime
Nathan Fielder
Metaphors`, 
        content: true 
      }
    ];

    const ul = document.getElementById('menuList');
    let index = 1;

    function render(){
      ul.innerHTML = "";
      ITEMS.forEach((item,i)=>{
        const li=document.createElement('li');
        if(item.static){
          const cursor=document.createElement('span');
          cursor.className='cursor';
          cursor.style.visibility='hidden';
          li.appendChild(cursor);
          li.appendChild(document.createTextNode(item.label));
          li.className = 'header';
        }else if(item.content){
          const contentDiv = document.createElement('div');
          contentDiv.className = 'content';
          contentDiv.textContent = item.label;
          li.appendChild(contentDiv);
        }else{
          li.setAttribute('aria-current', i===index);
          const cursor=document.createElement('span');
          cursor.className='cursor';
          cursor.style.visibility = i===index ? 'visible' : 'hidden';
          li.appendChild(cursor);
          li.appendChild(document.createTextNode(item.label));
        }
        ul.appendChild(li);
      });
    }

    function navigate(delta){
      const navigableItems = ITEMS.filter((item, i) => !item.static && !item.content);
      if(navigableItems.length === 0) return;
      
      let currentNavIndex = navigableItems.findIndex((item, navIndex) => {
        return ITEMS.findIndex(originalItem => originalItem === item) === index;
      });
      
      currentNavIndex = ((currentNavIndex + delta + navigableItems.length) % navigableItems.length);
      index = ITEMS.findIndex(item => item === navigableItems[currentNavIndex]);
      render();
    }

    function activate(){
    }

    function goHome() {
      window.location.href = 'index.html';
    }

    document.addEventListener('keydown', e=>{
      switch(e.key){
        case 'ArrowUp': e.preventDefault(); navigate(-1); break;
        case 'ArrowDown': e.preventDefault(); navigate(1); break;
        case 'Enter': e.preventDefault(); activate(); break;
        case 'h': case 'H': e.preventDefault(); goHome(); break;
      }
    });

    const addTap = (selector, handler)=>{
      const el = document.querySelector(selector);
      if(!el) return;
      const fn = (ev)=>{ ev.preventDefault(); handler(); };
      el.addEventListener('touchstart', fn, {passive:false});
      el.addEventListener('click', fn);
    };
    addTap('.touch.up', ()=>navigate(-1));
    addTap('.touch.down', ()=>navigate(1));
    addTap('.touch.enter', ()=>activate());

    render();
    ul.focus();
  </script>

  <script>
  (function(){
    const root = document.body;
    const cvs = document.getElementById('crtCanvas');
    const gl = cvs.getContext('webgl', {premultipliedAlpha:false, antialias:false});
    if(!gl) return;

    function resize(){
      const dpr = Math.min(window.devicePixelRatio||1, 2);
      cvs.width = window.innerWidth * dpr;
      cvs.height = window.innerHeight * dpr;
      cvs.style.width = '100vw';
      cvs.style.height = '100vh';
      cvs.style.position = 'fixed';
      cvs.style.top = '0';
      cvs.style.left = '0';
      gl.viewport(0, 0, cvs.width, cvs.height);
    }
    addEventListener('resize', resize, {passive:true});
    resize();

    const vsSrc = 'attribute vec2 a; varying vec2 v; void main(){ v = (a+1.0)*0.5; gl_Position = vec4(a,0.0,1.0);}';
    const fsSrc = `
    precision mediump float;
    varying vec2 v;
    uniform sampler2D uTex;
    uniform vec2 uRes;
    uniform float uIntensity;
    uniform float uBrightness;
    uniform float uVibrance;
    uniform float uRedBoost;
    uniform float uGreenBoost;
    uniform float uBlueBoost;
    
    // rounded rectangle with softer edges for more glow
    float roundedRect(in vec2 st, vec2 size, vec2 softness){
      size = (vec2(1.0)-size)*0.5;
      float p=1.0;
      p *= smoothstep(size.y, size.y+softness.y, st.y);
      p *= smoothstep(size.x, size.x+softness.x, st.x);
      p *= smoothstep(size.y, size.y+softness.y, 1.0-st.y);
      p *= smoothstep(size.x, size.x+softness.x, 1.0-st.x);
      return p;
    }
    
    // gaussian like falloff for glow effect
    float glowFalloff(float dist, float intensity) {
      return exp(-dist * dist * intensity);
    }
    
    // vibrance adjustment function
    vec3 adjustVibrance(vec3 color, float vibrance) {
      float maxChannel = max(max(color.r, color.g), color.b);
      float minChannel = min(min(color.r, color.g), color.b);
      float saturation = maxChannel - minChannel;
      return mix(vec3(dot(color, vec3(0.299, 0.587, 0.114))), color, vibrance * (1.0 + saturation));
    }
    
    vec3 pixelUnit(in vec2 st, in vec2 sampleCoord){
      vec3 color = vec3(0.0);
      vec3 texSample = texture2D(uTex, sampleCoord).rgb;
      
      // apply individual channel boosts
      texSample.r *= uRedBoost;
      texSample.g *= uGreenBoost;
      texSample.b *= uBlueBoost;
      
      // apply vibrance adjustment
      texSample = adjustVibrance(texSample, uVibrance);
      
      // main phosphor cells
      vec2 size = vec2(0.75, 0.88);
      vec2 softness = vec2(0.45, 0.25);
      
      // rgb subpixel positions
      float rPos = st.x * 3.0;
      float gPos = (st.x - 0.3333) * 3.0;
      float bPos = (st.x - 0.6666) * 3.0;
      
      // main phosphor contribution
      color += texSample.r * vec3(1.,0.,0.) * roundedRect(vec2(rPos, st.y), size, softness) * uBrightness;
      color += texSample.g * vec3(0.,1.,0.) * roundedRect(vec2(gPos, st.y), size, softness) * uBrightness;
      color += texSample.b * vec3(0.,0.,1.) * roundedRect(vec2(bPos, st.y), size, softness) * uBrightness;
      
      // enhanced glow/bleed effect
      float glowIntensity = 10.0;
      float glowRadius = 0.4;
      
      // calculate glow contributions from neighboring cells
      for(float i = -1.0; i <= 1.0; i += 1.0) {
        for(float j = -1.0; j <= 1.0; j += 1.0) {
          if(i == 0.0 && j == 0.0) continue; // Skip center cell
          
          vec2 neighborPos = vec2(rPos + i, st.y + j);
          float dist = length(vec2(i * 0.33, j));
          float glow = glowFalloff(dist / glowRadius, glowIntensity);
          
          // red glow
          if(neighborPos.x >= -0.5 && neighborPos.x <= 3.5 && neighborPos.y >= -0.5 && neighborPos.y <= 1.5) {
            color += texSample.r * vec3(1.,0.2,0.1) * glow * 0.3 * uBrightness;
          }
          
          // breen glow
          neighborPos = vec2(gPos + i, st.y + j);
          if(neighborPos.x >= -0.5 && neighborPos.x <= 3.5 && neighborPos.y >= -0.5 && neighborPos.y <= 1.5) {
            color += texSample.g * vec3(0.1,1.,0.2) * glow * 0.3 * uBrightness;
          }
          
          //bBlue glow
          neighborPos = vec2(bPos + i, st.y + j);
          if(neighborPos.x >= -0.5 && neighborPos.x <= 3.5 && neighborPos.y >= -0.5 && neighborPos.y <= 1.5) {
            color += texSample.b * vec3(0.1,0.2,1.) * glow * 0.3 * uBrightness;
          }
        }
      }
      
      // more glow
      float brightness = dot(texSample, vec3(0.299, 0.587, 0.114));
      color += texSample * brightness * 0.35 * uBrightness;
      
      return color;
    }
    
    void main(){
      vec2 sampleCoord = v * uRes;
      sampleCoord.y -= step(1.0, mod(sampleCoord.x, 2.0)) * 0.5;
      vec2 offsetUV = fract(sampleCoord);
      sampleCoord = (floor(sampleCoord) + 0.5) / uRes;
      vec3 color = pixelUnit(offsetUV, sampleCoord) * uIntensity;
      
      // bloom
      color = mix(color, color * color, 0.1);
      
      gl_FragColor = vec4(color, 1.0);
    }`;

    function shader(type, src){
      const s = gl.createShader(type);
      gl.shaderSource(s, src); gl.compileShader(s);
      if(!gl.getShaderParameter(s, gl.COMPILE_STATUS)){ console.warn(gl.getShaderInfoLog(s)); }
      return s;
    }
    const prog = gl.createProgram();
    gl.attachShader(prog, shader(gl.VERTEX_SHADER, vsSrc));
    gl.attachShader(prog, shader(gl.FRAGMENT_SHADER, fsSrc));
    gl.linkProgram(prog);
    if(!gl.getProgramParameter(prog, gl.LINK_STATUS)){ console.warn(gl.getProgramInfoLog(prog)); }
    gl.useProgram(prog);

    const buf = gl.createBuffer(); gl.bindBuffer(gl.ARRAY_BUFFER, buf);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,-1, 1,-1, -1,1, 1,1]), gl.STATIC_DRAW);
    const loc = gl.getAttribLocation(prog,'a');
    gl.enableVertexAttribArray(loc);
    gl.vertexAttribPointer(loc,2,gl.FLOAT,false,0,0);

    const uTex = gl.getUniformLocation(prog,'uTex');
    const uRes = gl.getUniformLocation(prog,'uRes');
    const uIntensity = gl.getUniformLocation(prog,'uIntensity');
    const uBrightness = gl.getUniformLocation(prog,'uBrightness');
    const uVibrance = gl.getUniformLocation(prog,'uVibrance');
    const uRedBoost = gl.getUniformLocation(prog,'uRedBoost');
    const uGreenBoost = gl.getUniformLocation(prog,'uGreenBoost');
    const uBlueBoost = gl.getUniformLocation(prog,'uBlueBoost');
    
    gl.uniform1i(uTex,0);
    gl.uniform1f(uIntensity, 1.65);
    gl.uniform1f(uBrightness, 1.5);
    gl.uniform1f(uVibrance, 1.5);
    gl.uniform1f(uRedBoost, 1.0);
    gl.uniform1f(uGreenBoost, 1.0); 
    gl.uniform1f(uBlueBoost, 1.0);

    const srcCanvas = document.createElement('canvas');
    const sctx = srcCanvas.getContext('2d', {alpha:false});
    function sizeSource(){
      srcCanvas.width = Math.max(2, window.innerWidth);
      srcCanvas.height = Math.max(2, window.innerHeight);
    }
    sizeSource(); addEventListener('resize', sizeSource, {passive:true});

    async function snapshot(){
      const xml = new XMLSerializer().serializeToString(document.documentElement);
      const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='${srcCanvas.width}' height='${srcCanvas.height}'>
        <foreignObject width='100%' height='100%' transform='scale(${srcCanvas.width/window.innerWidth} ${srcCanvas.height/window.innerHeight})'>
        ${xml}
        </foreignObject></svg>`;
      const img = new Image();
      img.decoding='async';
      img.src = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);
      await img.decode().catch(()=>{});
      sctx.clearRect(0,0,srcCanvas.width,srcCanvas.height);
      sctx.drawImage(img, 0, 0, srcCanvas.width, srcCanvas.height);
    }

    const tex = gl.createTexture();
    gl.activeTexture(gl.TEXTURE0);
    gl.bindTexture(gl.TEXTURE_2D, tex);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

    let last = 0;
    function frame(t){
      requestAnimationFrame(frame);
      if(t - last > 120){
        last = t;
        snapshot().then(()=>{
          gl.bindTexture(gl.TEXTURE_2D, tex);
          gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
          gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,srcCanvas);
          gl.uniform2f(uRes, srcCanvas.width/2.5, srcCanvas.height/2.5);
        });
      }
      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
    }
    requestAnimationFrame(frame);
  })();
  </script>

</body>
</html>
